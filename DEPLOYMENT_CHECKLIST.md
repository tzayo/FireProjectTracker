# 📋 רשימת בדיקה לפריסה - מערכת ניהול כיבוי אש
## Deployment Checklist - Fire Safety Management System

---

## ✅ לפני ההתקנה

- [ ] ודא שיש Python 3.8+ מותקן
- [ ] ודא שיש Node.js 18+ מותקן
- [ ] ודא חיבור לאינטרנט (להתקנת packages)
- [ ] הכן מיקום לשרת (מחשב יעודי / שרת בענן)

---

## 🔧 התקנה

### Backend Setup
- [ ] התקנת תלויות Python:
  ```bash
  cd backend
  pip install Flask flask-cors flask-sqlalchemy
  ```
- [ ] בדיקה שהשרת עולה:
  ```bash
  python app.py
  ```
- [ ] גש ל-http://localhost:5000/api/dashboard/stats ובדוק שמתקבל JSON

### Frontend Setup
- [ ] התקנת תלויות Node.js:
  ```bash
  cd frontend
  npm install
  ```
- [ ] בדיקה שהאפליקציה עולה:
  ```bash
  npm start
  ```
- [ ] הדפדפן אמור להיפתח ל-http://localhost:3000

---

## 📊 הזנת נתונים ראשוניים

### שלב 1: הוסף צוותים
- [ ] לחץ על "צוותים"
- [ ] הוסף לפחות צוות אחד:
  - שם: צוות א'
  - מנהיג: [שם]
  - טלפון: [טלפון]

### שלב 2: הוסף הידרנטים
- [ ] לחץ על "הידרנטים"
- [ ] הוסף את כל ההידרנטים בקיבוץ:
  - מספר סידורי: H-001, H-002, וכו'
  - קואורדינטות GPS (השתמש ב-Google Maps)
  - לחץ מים (אם ידוע)
  - סטטוס נוכחי

**טיפ:** התחל מההידרנטים המרכזיים ביותר והתקדם החוצה

### שלב 3: הוסף ארונות ציוד
- [ ] לחץ על "ארונות ציוד"
- [ ] הוסף את כל הארונות:
  - מספר ארון: C-001, C-002, וכו'
  - קואורדינטות GPS
  - סוג (סטנדרטי/מורחב/חירום)

### שלב 4: הוסף ציוד לכל ארון
- [ ] לכל ארון, לחץ "תכולה"
- [ ] הוסף פריטים:
  - זרנוקים (כמות + אורך)
  - מטפים (כמות + תאריך פג תוקף!)
  - מזנקים
  - ברזים ומחברים
  - ציוד הגנה

**חשוב:** הזן תאריכי פג תוקף למטפים כדי לקבל התראות!

### שלב 5: צור משימות בדיקה תקופתיות
- [ ] לחץ על "משימות"
- [ ] צור משימת בדיקה להידרנט ראשון:
  - כותרת: "בדיקה תקופתית H-001"
  - סוג: בדיקה
  - עדיפות: בינונית
  - קשר להידרנט H-001
  - תאריך יעד: בעוד חודש
  - אחראי: [שם חבר צוות]

---

## 🗺️ בדיקת מפות

- [ ] היכנס ללוח הבקרה
- [ ] ודא שהמפה נטענת
- [ ] ודא שכל ההידרנטים מופיעים במפה (עם נקודות צבעוניות)
- [ ] ודא שכל הארונות מופיעים במפה
- [ ] לחץ על כמה סמנים ובדוק שהפרטים מוצגים
- [ ] בדוק שהצבעים נכונים:
  - ירוק = תקין
  - צהוב = דורש תשומת לב
  - אדום = בעיה

---

## ⚠️ בדיקת התראות

- [ ] היכנס ללוח הבקרה
- [ ] ודא שההתראות מופיעות (אם יש)
- [ ] בדוק שהתראות על מטפים שפגים בעוד 30 יום מופיעות
- [ ] בדוק שהתראות על הידרנטים שלא נבדקו מופיעות

**ליצירת התראה מלאכותית לבדיקה:**
1. הוסף מטף עם תאריך פג תוקף בעוד 15 יום
2. רענן את לוח הבקרה
3. אמורה להופיע התראה

---

## 📱 בדיקת תאימות למובייל

- [ ] פתח את המערכת מטלפון נייד
- [ ] ודא שהתפריט מתכווץ להמבורגר מבוטון
- [ ] ודא שהמפות עובדות במובייל (ניתן לזום וגרור)
- [ ] ודא שכל הטפסים קלים למילוי במובייל
- [ ] נסה להתקין כאפליקציה (Chrome: "Add to Home Screen")

---

## 🔐 אבטחה (לסביבת Production)

אם מפרסים למשתמשים חיצוניים או דרך האינטרנט:

- [ ] הוסף אימות משתמשים (שם משתמש + סיסמה)
- [ ] הגדר הרשאות לפי תפקיד:
  - מנהל מערכת - גישה מלאה
  - מפקד כיבוי - כל הפעולות מלבד מחיקה
  - חבר צוות - עדכון משימות שלו
  - צופה - צפייה בלבד
- [ ] עבור ל-HTTPS (SSL Certificate)
- [ ] שנה מ-SQLite ל-PostgreSQL (לביצועים טובים יותר)
- [ ] הגדר גיבויים אוטומטיים יומיים
- [ ] הגבל גישה לרשת הפנימית בלבד (או VPN)

---

## 💾 גיבויים

### גיבוי יומי מומלץ:

```bash
#!/bin/bash
# backup-db.sh
DATE=$(date +%Y%m%d_%H%M%S)
cp backend/fire_department.db backups/fire_department_$DATE.db
echo "✅ גיבוי נוצר: backups/fire_department_$DATE.db"

# שמור רק 30 גיבויים אחרונים
ls -t backups/*.db | tail -n +31 | xargs rm -f
```

הפעלה אוטומטית עם cron (כל יום בחצות):
```bash
0 0 * * * /path/to/backup-db.sh
```

---

## 📈 ניטור ותחזוקה

### בדיקות יומיות
- [ ] בדוק שהמערכת פועלת
- [ ] סקור התראות בלוח הבקרה
- [ ] ודא שאין שגיאות ב-logs

### בדיקות שבועיות
- [ ] ודא שכל ההידרנטים מעודכנים
- [ ] בדוק תאריכי פג תוקף של מטפים
- [ ] סקור משימות שלא הושלמו

### בדיקות חודשיות
- [ ] עדכן תאריכי בדיקה להידרנטים
- [ ] בצע גיבוי ידני
- [ ] סקור סטטיסטיקות חודשיות
- [ ] תכנן משימות לחודש הבא

---

## 🚨 טיפול בבעיות נפוצות

### Backend לא עולה

**בעיה:** שגיאת Port 5000 is already in use
```bash
# פתרון: הרוג תהליכים על פורט 5000
lsof -ti:5000 | xargs kill -9
# או שנה פורט ב-app.py:
# app.run(port=5001)
```

**בעיה:** Import Error - No module named 'flask'
```bash
# פתרון: התקן תלויות
pip install Flask flask-cors flask-sqlalchemy
```

### Frontend לא טוען

**בעיה:** Module not found errors
```bash
# פתרון: נקה והתקן מחדש
cd frontend
rm -rf node_modules package-lock.json
npm install
```

**בעיה:** Maps לא נטענים
- ודא חיבור אינטרנט (Leaflet טוען tiles מהרשת)
- בדוק console ב-DevTools לשגיאות

### Database Issues

**בעיה:** IntegrityError - UNIQUE constraint failed
- מספרים סידוריים חייבים להיות ייחודיים
- שנה את המספר או בדוק אם כבר קיים

**בעיה:** Table doesn't exist
```bash
# פתרון: אתחול מסד נתונים
cd backend
python
>>> from app import db, app
>>> with app.app_context():
...     db.create_all()
>>> exit()
```

---

## 🎯 מטרות ו-KPIs

### מדדי הצלחה

- **כיסוי מלא:** כל ההידרנטים והארונות רשומים במערכת
- **מעקב תקופתי:** כל הידרנט נבדק כל 6 חודשים
- **ציוד תקין:** 100% מהמטפים בתוקף
- **משימות מוקצות:** כל משימה עם אחראי ותאריך יעד
- **זמן תגובה:** מציאת הידרנט קרוב תוך 30 שניות במצב חירום

### דוחות מומלצים

- דוח בדיקות חודשי (אלו הידרנטים נבדקו)
- דוח מלאי (מה חסר או דורש החלפה)
- דוח משימות (מה הושלם, מה ממתין)
- מפת כיסוי (אזורים ללא הידרנט ברדיוס 50 מטר)

---

## 🌟 המלצות לשימוש יעיל

1. **עדכנו באופן שוטף** - שמרו על המערכת מעודכנת
2. **הקצו אחראיים** - לכל משימה צריך להיות אחראי
3. **השתמשו במפות** - במצב חירום, המפה תחסוך זמן יקר
4. **שמרו על המלאי** - עדכנו מיד כשמשתמשים בציוד
5. **תעדו הכל** - כל פעילות, בדיקה, ותיקון

---

## 📞 תמיכה טכנית

### בעיות טכניות
- בדוק logs: `backend.log` ו-`frontend.log`
- חפש ב-[SYSTEM_GUIDE.md](SYSTEM_GUIDE.md) פתרון בעיות
- פנה למפתח המערכת

### הצעות לשיפור
- רשום במערכת המשימות
- שלח feedback למנהל הפרויקט

---

**עדכון אחרון:** 2025-10-10  
**גרסה:** 2.0  
**סטטוס:** ✅ מוכן לפריסה
